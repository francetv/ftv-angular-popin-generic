angular.module("ftv.components.popinGeneric",["ftv.components.popinGeneric.templates"]).factory("popinModalService",["$document","$compile","$controller","$http","$rootScope","$q","$templateCache",function(e,n,o,l,t,r,i){function c(){var e=this,c=function(e,n){var o=r.defer();if(e)o.resolve(e);else if(n){var t=i.get(n);void 0!==t?o.resolve(t):l({method:"GET",url:n,cache:!0}).then(function(e){i.put(n,e.data),o.resolve(e.data)},function(e){o.reject(e)})}else o.reject("No template or templateUrl has been specified.");return o.promise};e.showModal=function(e){var l=r.defer(),i=e.baseController;if(!i)return l.reject("No controller has been specified."),l.promise;var s=e.controller;return c(e.template,e.layoutUrl).then(function(c){var a=t.$new();a.templateUrl=e.templateUrl,a.classes={ftvPopin:!0},e.cssModifier&&(a.classes["ftvPopin--"+e.cssModifier]=!0);var u=r.defer(),d={$scope:a,close:function(e,n){t.$emit("closePopInZoom"),void 0!==n&&null!==n||(n=0),window.setTimeout(function(){u.resolve(e),a.$destroy(),h.remove(),d.close=null,l=null,u=null,G=null,d=null,h=null,a=null},n)}};if(e.inputs)for(var f in e.inputs)d[f]=e.inputs[f];var v=angular.element(c),m=n(v),h=m(a);d.$element=h;var $,g=o(i,d);s&&($=o(s,d)),e.appendElement?e.appendElement.append(h):p.append(h);var G={scope:a,element:h,close:u.promise,baseController:g,controller:$};l.resolve(G)}).then(function(){t.$emit("openPopInZoom")},function(e){l.reject(e)}),l.promise}}var p=e.find("body");return new c}]).service("popinGenericService",["popinModalService",function(e){this.showModal=function(n){return e.showModal({layoutUrl:"/popinGeneric/index.html",baseController:"popinGenericController",templateUrl:n.templateUrl,controller:n.controller,cssModifier:n.cssModifier})}}]).controller("popinGenericController",["$scope","close",function(e,n){e.close=function(){n()}}]),angular.module("ftv.components.popinGeneric.templates",[]).run(["$templateCache",function(e){e.put("/popinGeneric/index.html",'<div ng-class="classes" ng-click="close()"><div class="ftvPopin__wrapper" ng-click="stillOpen($event)"><ng-include src="templateUrl"></ng-include></div></div><div class="ftvPopinOverlay"></div>')}]);